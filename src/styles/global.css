@tailwind base;
@tailwind components;
@tailwind utilities;

@font-face {
  font-family: 'Agave';
  src: url('/font/Agave-Regular.ttf') format('truetype');
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}

@layer components {
  .prose :where(code, pre, kbd, samp) {
    @apply font-mono;
    font-family: Agave, Consolas, ui-monospace, SFMono-Regular, Menlo, monospace !important;
  }

  .prose :where(h1, h2, h3, h4, h5, h6, strong, b):not(:where(.not-prose, .not-prose *)) {
    @apply text-zinc-700 dark:text-zinc-50;
  }

  .prose :where(:not(pre) > code):not(:where(.not-prose, .not-prose *)) {
    @apply rounded bg-zinc-100 px-1 py-0.5 text-[0.9em] text-zinc-900 dark:bg-zinc-800 dark:text-zinc-100;
  }

  .prose :where(h1, h2, h3, h4, h5, h6):not(:where(.not-prose, .not-prose *)) {
    margin-bottom: 12px;
  }

  .prose :where(h1) {
    @apply text-4xl;
  }

  .prose :where(h2) {
    @apply text-[27px];
  }

  .prose :where(h3) {
    @apply text-[25px];
  }

  .prose :where(h4) {
    @apply text-[23px];
  }

  .prose :where(h5) {
    @apply text-[21px];
  }

  .prose :where(h6) {
    @apply text-[19px];
  }

  .prose :where(h2[id], h3[id], h4[id], h5[id], h6[id]) {
    @apply cursor-pointer scroll-mt-28;
  }

  .prose :where(h2[id], h3[id], h4[id], h5[id], h6[id]):hover {
    @apply underline decoration-zinc-300 underline-offset-4 dark:decoration-zinc-700;
  }

  .openai-prose {
    @apply prose prose-zinc dark:prose-invert;
  }

  .openai-prose {
    font-size: 17px;
    line-height: 1.75;
  }

  .openai-prose :where(p):not(:where(.not-prose, .not-prose *)) {
    margin-top: 1.1em;
    margin-bottom: 1.1em;
  }

  .openai-prose :where(h1):not(:where(.not-prose, .not-prose *)) {
    @apply tracking-tight;
    font-size: 40px;
    line-height: 1.1;
    margin-top: 0;
    margin-bottom: 0.6em;
  }

  .openai-prose :where(h2):not(:where(.not-prose, .not-prose *)) {
    @apply tracking-tight;
    font-size: 28px;
    line-height: 1.2;
    margin-top: 1.6em;
    margin-bottom: 0.6em;
  }

  .openai-prose :where(h3):not(:where(.not-prose, .not-prose *)) {
    @apply tracking-tight;
    font-size: 22px;
    line-height: 1.25;
    margin-top: 1.4em;
    margin-bottom: 0.5em;
  }

  .openai-prose :where(ul, ol):not(:where(.not-prose, .not-prose *)) {
    margin-top: 1em;
    margin-bottom: 1em;
  }

  .openai-prose :where(li):not(:where(.not-prose, .not-prose *)) {
    margin-top: 0.35em;
    margin-bottom: 0.35em;
  }

  .openai-prose :where(a):not(:where(.not-prose, .not-prose *)) {
    @apply no-underline;
    border-bottom: 1px solid rgb(212 212 216);
    transition: border-color 150ms ease, color 150ms ease;
  }

  .openai-prose :where(a:hover):not(:where(.not-prose, .not-prose *)) {
    border-bottom-color: rgb(24 24 27);
  }

  .openai-prose :where(.dark a):not(:where(.not-prose, .not-prose *)) {
    border-bottom-color: rgb(82 82 91);
  }

  .openai-prose :where(.dark a:hover):not(:where(.not-prose, .not-prose *)) {
    border-bottom-color: rgb(244 244 245);
  }

  .openai-prose :where(pre):not(:where(.not-prose, .not-prose *)) {
    @apply rounded-2xl border border-zinc-200 bg-white shadow-sm dark:border-zinc-800 dark:bg-zinc-950;
    padding: 16px;
    overflow-x: auto;
  }

  .openai-prose :where(pre code):not(:where(.not-prose, .not-prose *)) {
    background: transparent;
    padding: 0;
    border-radius: 0;
    font-size: 0.9em;
    color: inherit;
  }

  .openai-prose :where(blockquote):not(:where(.not-prose, .not-prose *)) {
    @apply rounded-xl border border-zinc-200 bg-zinc-50 px-5 py-4 text-zinc-700 dark:border-zinc-800 dark:bg-zinc-900 dark:text-zinc-200;
    border-left-width: 4px;
    border-left-color: rgb(161 161 170);
  }

  .openai-prose :where(hr):not(:where(.not-prose, .not-prose *)) {
    @apply border-zinc-200 dark:border-zinc-800;
    margin-top: 2em;
    margin-bottom: 2em;
  }

  .openai-prose :where(img):not(:where(.not-prose, .not-prose *)) {
    @apply rounded-2xl;
  }
}

@layer base {
  html {
    @apply scroll-smooth;
  }

  :where(h1, h2, h3, h4, h5, h6, strong, b) {
    color: rgb(63 63 70);
  }

  :where(.dark) :where(h1, h2, h3, h4, h5, h6, strong, b) {
    color: rgb(250 250 250);
  }

  body {
    @apply bg-zinc-50 text-zinc-900 antialiased dark:bg-zinc-950 dark:text-zinc-50;
  }

  a {
    @apply underline decoration-zinc-300 underline-offset-4 dark:decoration-zinc-700;
  }

  a:hover {
    @apply decoration-zinc-900 dark:decoration-zinc-200;
  }
}
